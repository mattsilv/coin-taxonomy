{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["country", "denomination", "face_value", "series"],
  "properties": {
    "country": {
      "type": "string",
      "const": "US"
    },
    "denomination": {
      "type": "string",
      "enum": [
        "Cents", "Two Cents", "Three Cents", "Nickels", "Half Dimes", "Dimes",
        "Twenty Cents", "Quarters", "Half Dollars", "Dollars", "Half Cents", "Trade Dollars",
        "Gold Dollars", "Quarter Eagles", "Three Dollar Gold", "Half Eagles", "Eagles", "Double Eagles",
        "Commemorative Half Dollars", "Commemorative Quarters", "Commemorative Dollars", "Fifty Dollars",
        "$1", "$5", "$10", "$25", "$50", "Paper $0.03", "Paper $0.05", "Paper $0.1", "Paper $0.15", "Paper $0.25", "Paper $0.5",
        "Paper $1", "Paper $2", "Paper $5", "Paper $10", "Paper $20", "Paper $50", "Paper $100"
      ]
    },
    "face_value": {
      "type": "number",
      "minimum": 0
    },
    "series": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["series_id", "series_name"],
        "properties": {
          "series_id": {
            "type": "string"
          },
          "series_name": {
            "type": "string"
          },
          "official_name": {
            "type": "string"
          },
          "years": {
            "type": "object",
            "required": ["start"],
            "properties": {
              "start": {
                "oneOf": [
                  {"type": "integer", "minimum": 1773},
                  {"type": "string", "const": "XXXX"}
                ]
              },
              "end": {
                "oneOf": [
                  {"type": "integer", "minimum": 1773},
                  {"type": "string", "const": "present"},
                  {"type": "string", "const": "XXXX"}
                ]
              }
            }
          },
          "designers": {
            "type": "object",
            "properties": {
              "obverse": {"type": "string"},
              "reverse": {"type": "string"}
            }
          },
          "specifications": {
            "type": "object",
            "properties": {
              "diameter_mm": {"type": ["number", "null"], "minimum": 0},
              "edge": {"type": ["string", "null"]},
              "edge_reeds": {"type": ["integer", "null"], "minimum": 0}
            }
          },
          "composition_periods": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["date_range"],
              "properties": {
                "date_range": {
                  "type": "object",
                  "required": ["start"],
                  "properties": {
                    "start": {
                      "oneOf": [
                        {"type": "integer", "minimum": 1787},
                        {"type": "string", "const": "XXXX"}
                      ]
                    },
                    "end": {
                      "oneOf": [
                        {"type": "integer", "minimum": 1773},
                        {"type": "string", "const": "present"},
                        {"type": "string", "const": "XXXX"}
                      ]
                    }
                  }
                },
                "composition_key": {
                  "type": "string",
                  "pattern": "^[a-z_0-9]+$"
                },
                "alloy_name": {
                  "type": "string"
                },
                "alloy": {
                  "type": "object",
                  "patternProperties": {
                    "^[a-z_]+$": {"type": "number", "minimum": 0, "maximum": 1}
                  }
                },
                "weight": {
                  "type": "object",
                  "properties": {
                    "grams": {"type": ["number", "null"], "minimum": 0},
                    "troy_oz": {"type": ["number", "null"], "minimum": 0}
                  }
                }
              },
              "oneOf": [
                {"required": ["composition_key"]},
                {"required": ["alloy_name", "alloy"]}
              ]
            }
          },
          "coins": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["coin_id", "year", "mint"],
              "properties": {
                "coin_id": {
                  "type": "string",
                  "pattern": "^[A-Z]{2,3}-[A-Z]{4}-(\\d{4}|XXXX)-[A-Z]{1,2}(-[A-Z0-9]+)?$"
                },
                "year": {
                  "oneOf": [
                    {
                      "type": "integer",
                      "minimum": 1773,
                      "maximum": 9999,
                      "description": "Specific year for numismatic coins"
                    },
                    {
                      "type": "string",
                      "const": "XXXX",
                      "description": "Random year placeholder for bullion products"
                    }
                  ]
                },
                "mint": {"type": "string", "pattern": "^[A-Z]+$"},
                "business_strikes": {"type": ["integer", "null"]},
                "proof_strikes": {"type": ["integer", "null"]},
                "rarity": {
                  "type": ["string", "null"],
                  "enum": ["key", "semi-key", "common", "scarce", null]
                },
                "varieties": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": ["name"],
                    "properties": {
                      "variety_id": {"type": ["string", "null"]},
                      "name": {"type": "string"},
                      "description": {"type": ["string", "null"]},
                      "estimated_mintage": {"type": ["integer", "null"]}
                    }
                  }
                },
                "source_citation": {"type": ["string", "null"]},
                "notes": {"type": ["string", "null"]}
              }
            }
          }
        }
      }
    }
  }
}