{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["country", "denomination", "face_value", "series"],
  "properties": {
    "country": {
      "type": "string",
      "const": "US"
    },
    "denomination": {
      "type": "string",
      "enum": ["Cents", "Two Cents", "Three Cents", "Nickels", "Half Dimes", "Dimes", "Twenty Cents", "Quarters", "Half Dollars", "Dollars", "Half Cents", "Trade Dollars"]
    },
    "face_value": {
      "type": "number",
      "minimum": 0
    },
    "series": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["series_id", "series_name", "years"],
        "properties": {
          "series_id": {
            "type": "string",
            "pattern": "^[a-z_]+$"
          },
          "series_name": {
            "type": "string"
          },
          "official_name": {
            "type": "string"
          },
          "years": {
            "type": "object",
            "required": ["start"],
            "properties": {
              "start": {
                "type": "integer",
                "minimum": 1787
              },
              "end": {
                "oneOf": [
                  {"type": "integer", "minimum": 1787},
                  {"type": "string", "const": "present"}
                ]
              }
            }
          },
          "designers": {
            "type": "object",
            "properties": {
              "obverse": {"type": "string"},
              "reverse": {"type": "string"}
            }
          },
          "specifications": {
            "type": "object",
            "properties": {
              "diameter_mm": {"type": ["number", "null"], "minimum": 0},
              "edge": {"type": ["string", "null"]},
              "edge_reeds": {"type": ["integer", "null"], "minimum": 0}
            }
          },
          "composition_periods": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["date_range"],
              "properties": {
                "date_range": {
                  "type": "object",
                  "required": ["start"],
                  "properties": {
                    "start": {"type": "integer", "minimum": 1787},
                    "end": {
                      "oneOf": [
                        {"type": "integer", "minimum": 1787},
                        {"type": "string", "const": "present"}
                      ]
                    }
                  }
                },
                "composition_key": {
                  "type": "string",
                  "pattern": "^[a-z_0-9]+$"
                },
                "alloy_name": {
                  "type": "string"
                },
                "alloy": {
                  "type": "object",
                  "patternProperties": {
                    "^[a-z_]+$": {"type": "number", "minimum": 0, "maximum": 1}
                  }
                },
                "weight": {
                  "type": "object",
                  "properties": {
                    "grams": {"type": ["number", "null"], "minimum": 0},
                    "troy_oz": {"type": ["number", "null"], "minimum": 0}
                  }
                }
              },
              "oneOf": [
                {"required": ["composition_key"]},
                {"required": ["alloy_name", "alloy"]}
              ]
            }
          },
          "coins": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["coin_id", "year", "mint"],
              "properties": {
                "coin_id": {
                  "type": "string",
                  "pattern": "^[A-Z]{2,3}-[A-Z]{4}-\\d{4}-[A-Z]{1,2}$"
                },
                "year": {"type": "integer", "minimum": 1787},
                "mint": {"type": "string", "pattern": "^[A-Z]+$"},
                "business_strikes": {"type": ["integer", "null"]},
                "proof_strikes": {"type": ["integer", "null"]},
                "rarity": {
                  "type": ["string", "null"],
                  "enum": ["key", "semi-key", "common", "scarce", null]
                },
                "varieties": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": ["variety_id", "name"],
                    "properties": {
                      "variety_id": {"type": "string"},
                      "name": {"type": "string"},
                      "description": {"type": ["string", "null"]},
                      "estimated_mintage": {"type": ["integer", "null"]}
                    }
                  }
                },
                "source_citation": {"type": ["string", "null"]},
                "notes": {"type": ["string", "null"]}
              }
            }
          }
        }
      }
    }
  }
}